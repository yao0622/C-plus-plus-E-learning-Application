<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=gb2312">
    <title>数组、指针与字符串</title>
</head>
<body>
<img src="images/knowlege-6.jpg" width="392" height="464" />
<h3>理论目标</h3>
<p>数组是具有一定顺序关系的若干对象的集合体，组成数组的对象称为该数组的元素。使用数组可以方便地处理大规模的同类型对象与数据。掌握数组的概念和语法，可以在编程中提高程序的效率，并改善程序的可读性。</p>
<p>C++从C继承来的一个重要特征就是可以直接使用地址来访问内存，指针变量就是实现这一特征的重要数据类型。应用指针，可以高效地处理内存中存放的大量数据，方便地实现函数间的数据共享，灵活地实现动态内存分配。</p>
<p>字符数组可以用来表示字符串。但是从面向对象的观点和安全性的角度出发，用字符数组表示的字符串有不足之处，因此，标准C++类库中提供了string类，熟练掌握string类的使用方法可以提高编程的效率。<p>

    本章的主要学习目标包括： <br>
<li>理解一维和多维数组的存储方式，掌握一维和多维数组的声明、初始化与使用；掌握数据作为函数参数的方法；掌握对象数组的声明方法和初始化过程；</li>
<li>理解指针的概念，掌握指针的声明和使用；掌握指针数组、指针作为函数参数、指针型函数、指向函数的指针、对象指针等概念；</li>
<li>理解动态存储分配机制，掌握new和delete运算符的使用方法，理解用vector创建数据对象的方法；</li>
<li>理解浅复制与深复制的概念，掌握编写复制构造函数实现深复制的方法 </li>
<li>掌握用字符数组和类string处理字符串的方法 </li><br>

<h3>实践目标</h3>

<li>熟练掌握数组的定义、初始化和输入输出方法；</li>
<li>熟练掌握动态内存分配机制和指针的使用方法；</li>
<li>掌握对象数组的声明、初始化和使用方法；</li>
<li>掌握string类的使用；</li>
</p>

<h3>知识点：</h3>
<p>
    （1）数组的概念与定义（包括：一维数组、多维数组、对象数组、字符数组）<br/>
    （2）数组元素初始化（包括：一维数组、多维数组、对象数组、字符数组）<br/>
    （3）数组元素的引用方式（包括：一维数组、多维数组、对象数组、字符数组）<br/>
    （4）数组作为函数参数<br/>
    （5）指针的概念、声明、引用、运算<br/>
    （6）指向常量的指针和指针类型的常量<br/>
    （7）指针作为函数参数与函数指针<br/>
    （8）对象指针的概念与应用、this指针<br/>
    （9）指向类的非静态与静态成员的指针<br/>
    （10）动态内存的申请与释放（new/delete）<br/>
    （11）动态数组类、动态多维数组、用vector创建数组对象<br/>
    （12）浅复制与深复制<br/>
    （13）字符串的存储与处理<br/>
</p>
<h3>重点：</h3>
<p>
    （1）对象数组的概念、定义、初始化与引用<br/>
    （2）指针的概念、声明、引用与运算<br/>
    （3）对象指针的概念与应用、this指针<br/>
    （4）指向类的非静态与静态成员的指针<br/>
    （5）动态内存的申请与释放（new/delete）<br/>
    （6）动态数组类、动态多维数组、用vector创建数组对象<br/>
    （7）浅复制与深复制<br/>
    （8）字符串的存储与处理<br/>
    （9）利用数组与指针解决实际问题。 <br/>
</p>
<h3>难点：</h3>
<p>
    （1）理解指针的概念与运算<br/>
    （2）理解指向类的成员的指针<br/>
    （3）动态数组类的定义与使用<br/>
    （4）浅复制与深复制的概念及应用<br/>
    （5）利用数组与指针解决实际问题。 <br/>
</p>

<h2>数组</h2>
<p>数组是具有一定顺序关系的若干相同类型变量的集合体，组成数组的变量称为该数组的元素。数组属于构造类型。</p>
<h3>一维数组的声明</h3>
<pre>
类型说明符 数组名[常量表达式];
例如：int a[10];
表示 a 为整型数组，有10个元素：a[0]...a[9]
</pre>
<h3>数组的引用</h3>
<pre>
数组必须先声明，后使用。
只能逐个引用数组元素，而不能一次引用整个数组
例如：a[0]=a[5]+a[7]-a[2*3]；
</pre>
<h3>数组的存储顺序</h3>
<pre>
数组元素在内存中顺次存放，它们的地址是连续的。
</pre>
<h3>多维数组的声明</h3>
<pre>
数据类型  标识符[常量表达式1][常量表达式2] …;
</pre>
<h3>二维数组的声明</h3>
<pre>
类型说明符 数组名[常量表达式][常量表达式]
</pre>
<h3>二维数组的引用</h3>
<pre>
例如：b[1][2]=a[2][3]/2；
</pre>
<h3>二维数组的初始化</h3>
<pre>
1. 将所有数据写在一个{}内，按顺序赋值
例如：static int a[3][4]={1,2,3,4,5,6,7,8,9,10,11,12};
2. 分行给二维数组赋初值
例如：static int a[3][4]={{1,2,3,4},{5,6,7,8},{9,10,11,12}};
3. 可以对部分元素赋初值
例如：static int a[3][4]={{1},{0,6},{0,0,11}};
</pre>
<h3>对象数组</h3>
<h3>对象数组的声明：</h3>
<pre>
类名 数组名[元素个数]；
</pre>
<h3>对象数组的访问方法：</h3>
<pre>
通过下标访问  数组名[下标].成员名
</pre>
<h3>对象数组的初始化</h3>
<pre>
通过下标访问  数组名[下标].成员名
</pre>
<br>
<h2>指针</h2>
<h3>指针与指针变量的概念</h3>
<pre>
指针：内存地址，用于间接访问内存单元。
指针变量：用于存放地址的变量。
</pre>
<h3>指针变量的初始化</h3>
<pre>
存储类型 数据类型 *指针名＝初始地址;
</pre>
<h3>指针变量的赋值</h3>
<pre>
指针名=地址;
向指针变量赋的值必须是地址常量或变量，不能是普通整数。但可以赋值为整数0，表示空指针。
</pre>
<h3>指针变量的算术运算</h3>
<pre>
1. 指针与整数的加减运算
指针p加上或减去n，其意义是指针当前指向位置的前方或后方第n个数据的地址。这种运算的结果值取决于指针指向的数据类型。
例如：p1[n1]等价于*(p1 + n1)
2. 指针加一和减一运算
表示指向下一个或前一个数据。
例如：y=*px++ 相当于 y=*(px++)  (*和++优先级相同，自右向左运算)
</pre>
<h3>指针变量的关系运算</h3>
<pre>
指向相同类型数据的指针之间可以进行各种关系运算；指向不同数据类型的指针，以及指针与一般整数变量之间的关系运算是无意义的；指针可以和零之间进行等于或不等于的关系运算。例如：p==0或p!=0
</pre>
<h3>指向常量的指针</h3>
<pre>
不能通过指针来改变所指对象的值，但指针本身可以改变，可以指向另外的对象。
</pre>
<h3>指针类型的常量</h3>
<pre>
若声明指针常量，则指针本身的值不能被改变。
</pre>
<h3>指针作为函数参数</h3>
<pre>
以地址方式传递数据，可以用来返回函数处理结果；实参是数组名时形参可以是指针。
</pre>
<h3>指针型函数</h3>
<pre>
当函数的返回值是地址时，该函数就是指针型函数。
声明形式：存储类型 数据类型 *函数名()；
</pre>
<h3>函数指针</h3>
<pre>
声明形式：存储类型 数据类型 (*函数指针名)();
含义：数据指针指向数据存储区，而函数指针指向的是程序代码存储区。
</pre>
<h3>对象指针</h3>
<h3>对象指针的声明形式</h3>
<pre>
类名 *对象指针名；
</pre>
<h3>对象指针的引用方法</h3>
<pre>
通过指针访问对象成员的方法：对象指针名->成员名
例：ptr->getx() 相当于 (*ptr).getx();
</pre>
<h3>this指针</h3>
<pre>
this指针是隐含于每一个类的成员函数中的特殊指针，明确地指出了成员函数当前所操作的数据所属的对象
</pre>
<h3>指向类的非静态成员的指针</h3>
<pre>
通过指向成员的指针只能访问公有成员
</pre>
<h3>声明指向公有数据成员的指针</h3>
<pre>
类型说明符  类名::*指针名；
</pre>
<h3>指向数据成员的指针的赋值（说明指针应该指向哪个成员）：</h3>
<pre>
指针名 = &类名::数据成员名；
</pre>
<h3>指向数据成员的指针的访问方法</h3>
<pre>
通过对象名（或对象指针）与成员指针结合来访问数据成员：
对象名.*类成员指针名，或：
对象指针名->*类成员指针名
</pre>
<h3>声明指向公有函数成员的指针</h3>
<pre>
类型说明符  (类名::*指针名)(参数表)；
</pre>
<h3>指向函数成员的指针的初始化</h3>
<pre>
指针名=&类名::函数成员名；
</pre>
<h3>指向函数成员的指针的使用方法</h3>
<pre>
通过对象名（或对象指针）与成员指针结合来访问函数成员
(对象名.*类成员指针名)(参数表)
或：(对象指针名->*类成员指针名)(参数表)
</pre>
<h3>指向类的静态成员的指针</h3>
<pre>
对类的静态成员的访问不依赖于对象，可以用普通的指针来指向和访问静态成员
</pre>
<h3>动态申请内存操作符new</h3>
<pre>
语法：new  类型名T（初始化参数列表）；
功能：在程序执行期间，申请用于存放T类型对象的内存空间，并依初值列表赋以初值。
结果值：成功：T类型的指针，指向新分配的内存；失败：抛出异常。
</pre>
</pre>
<h3>动态释放内存操作符delete</h3>
<pre>
语法：delete 指针p；
功能：释放指针p所指向的内存。p必须是new操作的返回值。
</pre>
<h3>申请动态数组</h3>
<pre>
语法：new 类型名T [数组长度]；
数组长度可以是任何表达式，在运行时计算
</pre>
<h3>释放动态数组</h3>
<pre>
语法：delete[] 数组名p；
释放指针p所指向的数组。p必须是用new分配得到的数组首地址
</pre>
<h3>用vector创建数组对象</h3>
<pre>
语法：vector <元素类型> 数组对象名（数组长度）
    其中初值可以指定，但只能为所有元素指定相同初值：
    vector </元素类型> 数组对象名（数组长度，元素初值）
</pre>
<h3>vector数组对象元素的访问方式</h3>
<pre>
数组对象名[下标表达式]
</pre>
<h3>浅复制与深复制</h3>
<pre>
浅拷贝：实现对象间数据元素的一一对应复制。
深拷贝：当被复制的对象数据成员是指针类型时，不是复制该指针成员本身，而是将指针所指的对象进行复制。
</pre>
<br>
<h2>字符串</h2>
    <h3>字符串常量（例："program"） </h3>
<pre>
1. 各字符连续、顺序存放，每个字符占一个字节，以‘\0’结尾，相当于一个隐含创建的字符常量数组；
2.“program”出现在表达式中，表示这一char数组的首地址
3. 首地址可以赋给char常量指针。例如：const char *STRING1 = "program";
</pre>

    <h3>字符串变量 </h3>
<pre>
可以显式创建字符数组来表示字符串变量，例如，以下三条语句具有等价的作用：
char str[8] = { 'p', 'r', 'o', 'g', 'r', 'a', 'm', '\0' };
char str[8] = "program";
char str[] = "program";
</pre>
    <h3>string类的用法</h3>
<pre>
string实际上是对字符数组操作的封装
</pre>
    <h3>string类常用构造函数</h3>
<pre>
1. string(); //缺省构造函数，建立一个长度为0的串
2. string(const char *s);  //用指针s所指向的字符串常量初始化string类的对象
3. string(const string& rhs);  //拷贝构造函数
</pre>
</body>
</html>